{% assign id = section.id %}

{% style %}
  #shopify-section-{{ id }} .pet-container {
    padding: 4vw 0 3.8vw;
  }
  #shopify-section-{{ id }} h5 {
    font-size: 2.08vw;
    color: #333;
    text-align: center;
  }
  #shopify-section-{{ id }} .video-wrap {
    position: relative;
    width: 62.5vw;
    margin: 0 auto;
    margin-top: 2.6vw;
  }
  #shopify-section-{{ id }} video {
    width: 100%;
  }
  #shopify-section-{{ id }} .mask {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.4);
  }
  #shopify-section-{{ id }} .play {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 5.2vw;
    height: 5.2vw;
    background-image: url({{section.settings.icon | image_url}});
    background-repeat: no-repeat;
    background-size: 100%;
    cursor: pointer;
  }
  @media screen and (max-width: 797px) {
    #shopify-section-{{ id }} .pet-container {
      background: #faead9;
      padding: 10vw 0 0;
    }
    #shopify-section-{{ id }} h5 {
      font-size: 5.3vw;
    }
    #shopify-section-{{ id }} .video-wrap {
      width: 100%;
      margin-top: 8vw;
    }
    #shopify-section-{{ id }} .play {
      width: 13.3vw;
      height: 13.3vw;
    }
  }
{% endstyle %}

<div class="pet-container">
  <h5>{{ section.settings.title}}</h5>
  <div class="video-wrap">
    <video src="{{ section.settings.video }}" poster="{{ section.settings.poster | image_url }}" preload playsinline="false" webkit-playsinline="false"></video>
    <div class="mask">
      <i class="play"></i>
    </div>
  </div>
</div>

<script>
  $(function() {
    $(".play").on("click", function() {
      $(".pet-container video").attr("controls", "controls");
      $(".pet-container").find("video")[0].play();
      $(".mask").hide();
    });
  });
</script>

{% schema %}
{
  "name": "video-with-text",
  "presets": [
    {
      "name": "video-with-text"
    }
  ],
  "settings": [
    {
      "type": "text",
      "id": "title",
      "label": "title"
    },
    {
      "type": "image_picker",
      "id": "icon",
      "label": "play icon"
    },
    {
      "type": "text",
      "id": "video",
      "label": "video url"
    },
    {
      "type": "image_picker",
      "id": "poster",
      "label": "video poster"
    }
  ]
}
{% endschema %}
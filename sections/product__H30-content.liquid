{% assign lang = product.metafields['global'] %}

{% if lang.power.value %}
  {% assign power = lang.power.value %}
{% else %}
  {% assign power = lang.power %}
{% endif %}

{% if lang.ultra.value %}
  {% assign ultra = lang.ultra.value %}
{% else %}
  {% assign ultra = lang.ultra %}
{% endif %}

{% if lang.long_run.value %}
  {% assign long_run = lang.long_run.value %}
{% else %}
  {% assign long_run = lang.long_run %}
{% endif %}

{% if lang.flexibility.value %}
  {% assign flexibility = lang.flexibility.value %}
{% else %}
  {% assign flexibility = lang.flexibility %}
{% endif %}

{% if lang.dock.value %}
  {% assign dock = lang.dock.value %}
{% else %}
  {% assign dock = lang.dock %}
{% endif %}

{% if lang.whatbox.value %}
  {% assign whatbox = lang.whatbox.value %}
{% else %}
  {% assign whatbox = lang.whatbox %}
{% endif %}

{% if lang.cus_note.value %}
  {% assign cus_note = lang.cus_note.value %}
{% else %}
  {% assign cus_note = lang.cus_note %}
{% endif %}

{% if lang.cus_spces.value %}
  {% assign cus_spces = lang.cus_spces.value %}
{% else %}
  {% assign cus_spces = lang.cus_spces %}
{% endif %}

{% if lang.videoBanner.value %}
  {% assign videoBanner = lang.videoBanner.value %}
{% else %}
  {% assign videoBanner = lang.videoBanner %}
{% endif %}

{% if lang.products.value %}
  {% assign products = lang.products.value %}
{% else %}
  {% assign products = lang.products %}
{% endif %}

{% if product.metafields['global']['custom_variants'].value %}
  {% assign custom_variants = product.metafields['global']['custom_variants'].value %}
{% else %}
  {% assign custom_variants = product.metafields['global']['custom_variants'] %}
{% endif %}

{% if product.metafields['global']['tips'].value %}
  {% assign tips = product.metafields['global']['tips'].value %}
{% else %}
  {% assign tips = product.metafields['global']['tips'] %}
{% endif %}

{% if product.metafields.global.tips.value %}
  {% assign tips = product.metafields.global.tips.value %}
{% else %}
  {% assign tips = product.metafields.global.tips %}
{% endif %}

{% if product.metafields['global']['products'].value %}
  {% assign products = product.metafields['global']['products'].value %}
{% else %}
  {% assign products = product.metafields['global']['products'] %}
{% endif %}

{% if shop.metafields['global']['storefront_key'].value %}
  {% assign storefront_key = shop.metafields['global']['storefront_key'].value %}
{% else %}
  {% assign storefront_key = shop.metafields['global']['storefront_key'] %}
{% endif %}

{% if shop.metafields.global.common.value %}
  {% assign common = shop.metafields.global.common.value %}
{% else %}
  {% assign common = shop.metafields.global.common %}
{% endif %}

<script src="{{ 'gsap.min.js' | asset_url }}"></script>
<script src="{{ 'ScrollTrigger.min.js' | asset_url }}"></script>
{% comment %} <script src="{{ 'framePlayer.js' | asset_url }}" defer="defer"></script> {% endcomment %}


<div class="product__H30">

  <div id="main_ani" class="power banner">
    {% comment %} banner {% endcomment %}
    <div class="txt">
      <h3>{{ power.title }}</h3>
      <p>{{ power.desc }}</p>
    </div>
    <div class="bg">
      <img alt="power banner" data-src="{{ power.bg }}" class="lazyload" loading="lazy">
    </div>
    {% comment %} main_ani {% endcomment %}
    <div id="framePlayer">
      <h3 class="framePlayerTitle">{{ power.framePlayerTitle }}</h3>
      <p class="framePlayerDesc">{{ power.framePlayerDesc }}</p>
      <ul class="framePlayerImgs">
      </ul>
    </div>
    {% comment %} system {% endcomment %}
    <div class="system">
      <div class="system_box">
        <ul class="img">
          {% for item in lang.system.list %}
            <li data-index="{{ forloop.index0 }}">
              <video data-index="{{ forloop.index0 }}" class="lazyload is-hidden-mobile-only" data-src="{{ item.bg }}" muted autoplay webkit-playsinline playsinline loop></video>
              <video data-index="{{ forloop.index0 }}" class=" is-hidden-desktop-only" src="{{ item.mob_bg }}" muted autoplay webkit-playsinline playsinline loop></video>
            </li>
          {% endfor %}
        </ul>
        <div class="navBox">
          <ul class="nav">
            {% for item in lang.system.list %}
              <li data-index="{{ forloop.index0 }}" onclick="clickItemsIndex({{ forloop.index0 }})">
                <span>{{ item.nav }}</span>
              </li>
            {% endfor %}
          </ul>
          <ul class="system_txt">
            {% for item in lang.system.list %}
              <li data-index="{{ forloop.index0 }}">{{ item.txt }}</li>
            {% endfor %}
          </ul>
        </div>
      </div>
    </div>
  </div>

  <div class="ultra banner full_screen">
    <div class="bg">
      <picture>
        <source media="(max-width: 768px)" data-srcset="{{ ultra.mob_bg }}" />
        <img alt="" class="lazyload" data-src="{{ ultra.bg }}" />
      </picture>
    </div>
    <div class="txt">
      <h3>{{ ultra.title }}</h3>
      <p>{{ ultra.desc }}</p>
    </div>
  </div>

  <div class="long_run full_screen">
    <div class="long_run_box">
      <div class="img">
        <ul class="clean_time">
          {% for item in long_run.list %}
            <li>
              <img class="lazyload" data-src="{{ item.img }}" alt="" loading="lazy" />
            </li>
          {% endfor %}
        </ul>
        <img alt="" class="yy" src="{{ long_run.yy }}" loading="lazy" />
      </div>
      <div class="txt">
        <h4>{{ long_run.desc }}</h4>
        <h3>{{ long_run.title }}</h3>
        <div class="dot">
          <p class="left">{{ long_run.dot }}</p>
          <ul class="right_pc">
            {% for item in long_run.list %}
              <li data-index="{{ forloop.index0 }}" onclick="clickLongRunIndex({{ forloop.index0 }})">
                <span>{{ item.tit }}</span>
              </li>
            {% endfor %}
          </ul>
          <div class="right_mob">
            {% for item in long_run.list %}
              <p class="index{{ forloop.index0 }}" data-index="{{ forloop.index0 }}" onclick="clickLongRunIndex({{ forloop.index0 }})">
                <span>{{ item.tit }}</span>
              </p>
            {% endfor %}
            <span class="focus">
              <i class="iconfont">&#xe6bd;</i>
              <i class="iconfont">&#xe6bd;</i>
            </span>
          </div>
        </div>
        <p class="tips">{{ long_run.tips }}</p>
      </div>
    </div>
  </div>

  <div class="video_ani">
    <div id="videoArr" class="videoArr">
      <ul class="videoArrBox">
        {% for item in lang.videoArr.data %}
          <li class="item lazyload" data-src="{{ item }}"></li>
        {% endfor %}
      </ul>
    </div>
    <div class="txt">
      <div class="txtBox">
        <h3>{{ flexibility.title }}</h3>
        <p>{{ flexibility.desc }}</p>
      </div>
    </div>
    <div class="imgArr">
      <ul class="imgBox">
        {% for item in flexibility.list %}
          <li><img class="lazyload" data-src="{{ item }}" alt="" loading="lazy" /></li>
        {% endfor %}
      </ul>
    </div>
  </div>

  <div id="DockBox" class="dock">
    <div class="bg">
      <img alt="" class="DockImg lazyload" data-src="{{ dock.bg }}" loading="lazy" />
    </div>
    <div class="DockCover"></div>
    <div class="DockTxt">
      <h3>{{ dock.title }}</h3>
      <p>{{ dock.desc }}</p>
    </div>
  </div>

  <div class="Color full_screen">
    <div class="ColorBox">
      <div class="BigBox">
        {% for item in lang.Color.list %}
          <ul data-key="{{ item.key }}" class="img">
            {% for i in item.bigImgArr %}
              <li data-index="{{ forloop.index0 }}">
                <img class="lazyload" data-src="{{ i }}" alt="" loading="lazy">
              </li>
            {% endfor %}
          </ul>
        {% endfor %}
        <div class="ColorBtn">
          <ul class="txt">
            {% for item in lang.Color.list %}
              <li data-key="{{ item.key }}">{{ item.key_txt }}</li>
            {% endfor %}
          </ul>
          <div class="ColorImg">
            {% for item in lang.Color.list %}
              <a alt="" data-key="{{ item.key }}" class="{{ item.key }}">
                <span></span>
              </a>
            {% endfor %}
          </div>
        </div>
      </div>
      <div class="SmartBox">
        {% for item in lang.Color.list %}
          <ul data-key="{{ item.key }}" class="img">
            {% for i in item.SmartImgArr %}
              <li data-index="{{ forloop.index0 }}">
                <img class="lazyload" data-src="{{ i }}" alt="" loading="lazy">
              </li>
            {% endfor %}
          </ul>
        {% endfor %}
        <div class="ToggleBtn">
          <a class="btn_pre"></a>
          <a class="btn_next"></a>
        </div>
      </div>
    </div>
  </div>

  <div class="H30_video" style="display: none;">
    <div class="box">
      <div class="lazyframe" id="H30_video_url" data-ratio="16:9"></div>
    </div>
    <a class="closeVideo"><i class="iconfont">&#xe723;</i></a>
  </div>

  <div class="whatsbox">
    <div class="txt">
      <h3>{{ whatbox.title }}</h3>
    </div>
    <div class="bg">
      <img src="{{ whatbox.bg }}" class="lazyload" loading="lazy" alt="whatsbox" />
    </div>
  </div>

  <div class="noteTxt proSpces">
    <div class="noteBox">
      <h3 class="proSpcesTitle"><span>{{ cus_note.title }}</span></h3>
      <p>
        {% for item in cus_note.txtList %}
          <p class="item">
            <b>{{ item.tit }}</b><br/>
            {{ item.txt }}
          </p>
        {% endfor %}
    </div>
  </div>

  <div class="proSpces">
    <h3 class="proSpcesTitle"><span>{{ cus_spces.title }}</span></h3>
    <ul>
      {% for item in cus_spces.list %}
        <li>
          <h3 class="title"><span>{{ item.key }}</span><i></i></h3>
          <div class="txt">
            <div class="txtBox">{{ item.value }}</div>
          </div>
        </li>
      {% endfor %}
    </ul>
  </div>

</div>

{% assign variant = product.selected_or_first_available_variant %}

<script defer src="https://cdn.jsdelivr.net/npm/vanilla-lazyload@17.3.1/dist/lazyload.min.js"></script>

<script>
  {% for item in products %}
    {% assign oProduct = all_products[item.handle] %}
    {% if oProduct.variants == blank %}
      {% assign sold_out = true %}
    {% else %}
      {% for v in oProduct.variants %}
        {% if v.sku == item.sku %}
          {% assign oVariant = v %}
        {% endif %}
      {% endfor %}
      {% if oVariant.available == false or oVariant.price == 999999999 %}
        {% assign sold_out = true %}
      {% endif %}
    {% endif %}
  {% endfor %}

  {% if sold_out %}
    $("#BuyH30X8").css({ pointerEvents: "none", background: "#ccc" });
    $("#BuyH30X8").html("{{ 'products.product.sold_out' | t }}");
  {% endif %}
</script>

<script>
  {% if tips.content %}
    $(function(){
      $('#template-product-h30 .product__information').append("<div class='X8Box'>{{ tips.content }} <div> <img src='{{ tips.timeLine_src }}'' alt='timeLine'></div><div>")
    })
  {% endif %}
  $(function () {
    var viewPortHeight = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;
    var ll = new LazyLoad({
      thresholds: viewPortHeight + "px",
      use_native: true
    });
    Shopify.lazyLoadInstance = ll;
  })
  function line_item_h30(variants, product){
    let line_item = {};
    variants.map(item => {
      if(item.sku === product.sku) {
        line_item.variant_id = item.id;
      };
    });
    line_item.quantity = 1;
    return line_item;
  }
  function BuyNowH30(e){
    e.preventDefault();
    let line_items = [];

    {% if products %}
      {% for item in products %}
        {% assign oProduct = all_products[item.handle] %}
        line_items.push(line_item_h30({{ oProduct.variants | json }}, {{ item | json }}))
      {% endfor %}
      Shopify.theme.bundleBuynow({
        authorization: "{{ storefront_key }}",
        checkout: {
          line_items: line_items,
          presentment_currency: "{{ shop.currency }}",
          is_upstream_button: true,
          page_type: "product",
          secret: true,
          wallet_name: "Checkout"
        },
        onSuccess: () => {},
        onError: err => {
          $.dialog({ title: err.message, content: err.description, type: 'red' });
        }
      })
    {% else %}
      $('html, body').animate({ scrollTop: $('#template-product-h30').offset().top - (document.body.offsetWidth > 768 ? 99 : 43) }, 800);
    {% endif %}
  };
  let systemIndex = 1;
  let systemLen;
  let systemIndexInt;
  let longRunIndex = 0;
  let longRunIndexInt;
  let color_key = 'white';
  let color_index = 0;
  let colorLen;
  let player;

  $('.watchvideo').on('click', function() {
    if(!player) {
      const tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      const firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
    } else {
      $('.H30_video').show();
      player.playVideo()
    }
  })

  function onYouTubeIframeAPIReady() {
    player = new YT.Player('H30_video_url', {
      height: '100%',
      width: '100%',
      videoId: '{{ videoBanner.ytb_id }}',
      playlist: ['{{ videoBanner.ytb_id }}']
    });
    $('.H30_video').show();
    window.setTimeout(function() {
      player.playVideo()
    } , 2000);
  }

  $(document).on('click', '.closeVideo', function() {
    $('.H30_video').hide()
    player.pauseVideo();
  })

  $(document).ready(function(){

    {% if videoBanner.tag %}
      $('.product-gallery').append("<img class='h30_tag' alt='h30 tag' src='{{ videoBanner.tag }}' loading='lazy' />")
    {% endif %}

    const isMobile = $(".is-mobile").css('display') === 'block';
    if(!isMobile) {
      const imgArr = JSON.parse('{{ power.imgArr | json }}');
      const imgDom = imgArr.map((v, i) => {
        return `<li class="${i === 0 ? 'active' : 'ani_img'}">
          <img class="lazyload" alt="power" data-src=${v} laoding="lazy">
        </li>`;
      }).join('');
      $('.framePlayerImgs').append(imgDom);
      Shopify.lazyLoadInstance.update();
    }

    $('.rule .txtBox').each(function(index, item) {
      const h = $(this).innerHeight();
      $(this).css('max-height', h);
      $(this).addClass('less');
    });
    $('.rule .btn').on('click', function(){
      const handle = $(this).attr('data-handle');
      if ($(`.rule .txtBox[data-handle=${handle}]`).hasClass('less')) {
        $(`.rule .txtBox[data-handle=${handle}]`).removeClass('less');
        $(this).html("{{ common.btn_less }}");
      } else {
        $(`.rule .txtBox[data-handle=${handle}]`).addClass('less');
        $(this).html("{{ common.btn_more }}");
      }
    })
    
    // long_run
    setLongRunIndex(longRunIndex);
    // system
    setItemsIndex(systemIndex);
    
    // product
    $('.product_cus_content .iconBox').each(function(index, item) {
      const h = $(this).innerHeight();
      $(this).css('max-height', h);
    });
    $('.product_cus_content .txtItem').addClass('hideBox');
    $(document).on('click', '.product_cus_content .btn', function() {
      const $dom = $(this).parents('.txtItem');
      if ($dom.hasClass('hideBox')) {
        $('.product_cus_content .txtItem').addClass('hideBox');
        $dom.removeClass('hideBox');
      } else {
        $dom.addClass('hideBox');
      }
    });
    const custom_variants = JSON.parse('{{ custom_variants | json }}');
    if (custom_variants) {
      let sku = "";
      {%- for variant in product.variants -%}
        {% if forloop.first == true %}
          sku = "{{ variant.sku }}"
        {% endif %}
      {% endfor %}
      const dom = custom_variants.sku.map((v, i) => {
        const act = sku === v ? 'current' : '';
        return `<li class="color ${act}" data-sku="${v}">
          <a href="/products/${v}">
            <div class="dot" style="background: ${custom_variants.background[i]}"></div>
          </a>
          <span class="txt"> ${custom_variants.color_txt[i]}</span>
        </li>`;
      }).join('');
      if (custom_variants.sku.indexOf(sku) > -1) {
        $('.custom_variants').html(`<ul class="options">${dom}</ul>`);
        $('.custom_variants').removeClass('swap--visible');
      }
    }
    // color
    setColorKey(color_key);
    setColorIndex(color_index);
    colorLen = $(`.Color .BigBox ul[data-key=${color_key}] li`).length - 1;
    $(document).on('click', '.ColorImg a', function() {
      const key = $(this).attr('data-key');
      setColorKey(key);
    });
    $(document).on('click', '.Color .btn_next', function() {
      color_index < colorLen ? color_index += 1 : color_index = 0;
      setColorIndex(color_index);
    });
    $(document).on('click', '.Color .btn_pre', function() {
      color_index > 0 ? color_index -= 1 : color_index = colorLen;
      setColorIndex(color_index);
    });
    // spces
    $('.proSpces .txt').each((i, ele) => {
      const h = ele.offsetHeight;
      ele.style.maxHeight = `${h}px`;
    });
    $('.proSpces .txt').addClass('hideTxt');
    $(document).on('click', '.proSpces .title', function() {
      const $dom = $(this).parents('li');
      if ($($('.txt', $dom)).hasClass('showTxt')) {
        $($('.txt', $dom)).removeClass('showTxt');
        $(this).removeClass('showTxt');
        $($('.txt', $dom)).addClass('hideTxt');
      } else {
        $('.proSpces .title').removeClass('showTxt');
        $('.proSpces .txt').removeClass('showTxt');
        $('.proSpces .txt').addClass('hideTxt');
        $($('.txt', $dom)).addClass('showTxt');
        $(this).addClass('showTxt');
        $($('.txt', $dom)).removeClass('hideTxt');
      }
    });
  })
  window.onload = function(){
    gsap.registerPlugin(ScrollTrigger);
    // main_ani
    if (document.body.offsetWidth > 768) {
      gsap.timeline({
        scrollTrigger: {
          trigger: "#main_ani",
          start: document.body.offsetWidth > 768 ? 'top top+=99' : 'top top+=43',
          end: '+=3000',
          scrub: 1,
          pin: true
        }
      })
        .to("#main_ani #framePlayer", { opacity: 1, duration: 0.8 })
        .to("#main_ani .txt, #main_ani .bg", { opacity: 0, duration: 0.8 }, "=")
        .to("#main_ani #framePlayer ul", { opacity: 1 }, "=")
        .to("#main_ani #framePlayer li", { className: 'active', stagger: 0.1 }, "<-0.4")
        .to("#main_ani .framePlayerTitle", { opacity: 1 }, "<-0.4")
        .to("#main_ani .framePlayerDesc", { opacity: 1 }, "=")
        .to("#main_ani .framePlayerDesc", { opacity: 0 })
        .to("#main_ani #framePlayer ul", { opacity: 0 }, "=")
        .to("#main_ani .system", { opacity: 1 });
    }
    // dock
    gsap.timeline({
      scrollTrigger: {
        trigger: "#DockBox",
        start: document.body.offsetWidth > 768 ? 'top top+=99' : 'top top+=43',
        end: '+=1000',
        scrub: 1,
        pin: true,
        //markers: true
      }
    })
      .to("#DockBox .DockTxt",  { y: '-250%' })
      .to("#DockBox .DockCover", { borderWidth: 0 }, "<")
      .to("#DockBox .bg", { transform: 'scale(1)' }, "<");
    
    // video
    //ScrollTrigger.create({
    //  trigger: "#videoArr",
    //  start: 'top center-=10%',
    //  end: '+=30',
      //markers: true,
    //  onEnter: () => {
    //    gsap.to('#videoArr .item', { transform: 'scale(1)' });
    //    gsap.to('#videoArr video', { opacity: 1, delay: 0.6 });
    //  },
    //  onEnterBack: () => {
    //    gsap.to('#videoArr video', { opacity: 0 });
    //    gsap.to('#videoArr .item', { transform: 'scale(0)' }, "<");
    //  }
    //});
    // nav
    ScrollTrigger.create({
      trigger: "body",
      start: "top top-=100",
      end: "+=0",
      onEnter: () => {
        gsap.to('.GoShop', { height: document.body.offsetWidth > 768 ? "64px" : "43px" })
      },
      onEnterBack: () => {
        gsap.to('.GoShop', { height: "0" })
      }
    });
  }

  function setColorKey (key) {
    $(`.Color ul`).removeClass('ColorShow');
    $(`.Color li`).removeClass('ColorShow');
    $(`.Color .ColorImg a`).removeClass('ColorShow');
    $(`.Color ul[data-key=${key}]`).addClass('ColorShow');
    $(`.Color li[data-key=${key}]`).addClass('ColorShow');
    $(`.Color .ColorImg a[data-key=${key}]`).addClass('ColorShow');
  }
  function setColorIndex(index) {
    colorLen = $(`.Color .BigBox ul[data-key=${color_key}] li`).length - 1;
    $(`.Color ul li`).removeClass('image-intro');
    $(`.Color ul li`).removeClass('image-outro');
    if (index > 0) {
      $(`.Color ul li[data-index=${index}]`).addClass('image-intro');
      $(`.Color ul li[data-index=${index - 1}]`).addClass('image-outro');
    } else if (index === 0) {
      $(`.Color ul li[data-index=${index}]`).addClass('image-intro');
      $(`.Color ul li[data-index=${colorLen}]`).addClass('image-outro');
    }
  }
  function clickLongRunIndex(index) {
    longRunIndex = index;
    setLongRunIndex(longRunIndex);
  }
  function setLongRunIndex(index) {
    $('.long_run_box .txt li .focus').remove();
    $(`.long_run_box .txt li span`).css("border-color", "transparent");
    $(`.long_run_box .txt li[data-index=${index}] span`).css("border-color", "#c10016");
    $(`.long_run_box .txt li[data-index=${index}]`).append("<span class='focus'><i class='iconfont'>&#xe6bd;</i><i class='iconfont'>&#xe6bd;</i></span>");
    if (index === 0) {
      $('.long_run_box .txt p[data-index=0]').attr("class", "index0");
      $('.long_run_box .txt p[data-index=1]').attr("class", "index1");
      $('.long_run_box .txt p[data-index=2]').attr("class", "index2");
      $('.long_run_box .txt p[data-index=3]').attr("class", "index3");
      $('.long_run_box .img li:eq(0)').css({ 'top': '70%', 'left': '37%', 'transform': 'scale(2.3)' }); // 0
      $('.long_run_box .img li:eq(1)').css({ 'top': '25%', 'left': '70%', 'transform': 'scale(1)' }); // 1
      $('.long_run_box .img li:eq(2)').css({ 'top': '0', 'left': '37%', 'transform': 'scale(0.8)' }); // 2
      $('.long_run_box .img li:eq(3)').css({ 'top': '25%', 'left': '0', 'transform': 'scale(1)' }); // 3
    } else if (index === 1) {
      $('.long_run_box .txt p[data-index=0]').attr("class", "index3");
      $('.long_run_box .txt p[data-index=1]').attr("class", "index0");
      $('.long_run_box .txt p[data-index=2]').attr("class", "index1");
      $('.long_run_box .txt p[data-index=3]').attr("class", "index2");
      $('.long_run_box .img li:eq(0)').css({ 'top': '25%', 'left': '0', 'transform': 'scale(1)' }); // 3
      $('.long_run_box .img li:eq(1)').css({ 'top': '70%', 'left': '37%', 'transform': 'scale(2.3)' }); // 0
      $('.long_run_box .img li:eq(2)').css({ 'top': '25%', 'left': '70%', 'transform': 'scale(1)' }); // 1
      $('.long_run_box .img li:eq(3)').css({ 'top': '0', 'left': '37%', 'transform': 'scale(0.8)' }); // 2
    } else if (index === 2) {
      $('.long_run_box .txt p[data-index=0]').attr("class", "index2");
      $('.long_run_box .txt p[data-index=1]').attr("class", "index3");
      $('.long_run_box .txt p[data-index=2]').attr("class", "index0");
      $('.long_run_box .txt p[data-index=3]').attr("class", "index1");
      $('.long_run_box .img li:eq(0)').css({ 'top': '0', 'left': '37%', 'transform': 'scale(0.8)' }); // 2
      $('.long_run_box .img li:eq(1)').css({ 'top': '25%', 'left': '0', 'transform': 'scale(1)' }); // 3
      $('.long_run_box .img li:eq(2)').css({ 'top': '70%', 'left': '37%', 'transform': 'scale(2.3)' }); // 0
      $('.long_run_box .img li:eq(3)').css({ 'top': '25%', 'left': '70%', 'transform': 'scale(1)' }); // 1
    } else if (index === 3) {
      $('.long_run_box .txt p[data-index=0]').attr("class", "index1");
      $('.long_run_box .txt p[data-index=1]').attr("class", "index2");
      $('.long_run_box .txt p[data-index=2]').attr("class", "index3");
      $('.long_run_box .txt p[data-index=3]').attr("class", "index0");
      $('.long_run_box .img li:eq(0)').css({ 'top': '25%', 'left': '70%', 'transform': 'scale(1)' }); // 1
      $('.long_run_box .img li:eq(1)').css({ 'top': '0', 'left': '37%', 'transform': 'scale(0.8)' }); // 2
      $('.long_run_box .img li:eq(2)').css({ 'top': '25%', 'left': '0', 'transform': 'scale(1)' }); // 3
      $('.long_run_box .img li:eq(3)').css({ 'top': '70%', 'left': '37%', 'transform': 'scale(2.3)' }); // 0
    }
  }
  function clickItemsIndex(index) {
    systemIndex = index;
    setItemsIndex(systemIndex);
  }
  function setItemsIndex(index) {
    $('.system .img li').removeClass('show');
    $('.system .nav li').removeClass('show');
    $('.system .system_txt li').removeClass('show');
    $(`.system .img li[data-index=${index}]`).addClass('show');
    $(`.system .nav li[data-index=${index}]`).addClass('show');
    $(`.system .system_txt li[data-index=${index}]`).addClass('show');
  }
  function goAnchor(id) {
    $('html, body').animate({ scrollTop: $(`#${id}`).offset().top - (document.body.offsetWidth > 768 ? 99 : 43) }, 800);
  }
</script>
